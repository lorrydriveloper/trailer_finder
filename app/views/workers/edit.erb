<% if @worker.rol.nil? %>
  <h2>Complet your profile here</h2>
<% end %>

<form action="/profile/<%= @worker.id %>" method="POST">
<input type="hidden" name="_method" value='PATCH' id='hidden'>
<label for="first_name">First Name: </label>
<br>
<input type="text" name="worker[first_name]" id="first_name" value=<%= @worker.first_name %>>
<br>

<label for="last_name">Last Name: </label>
<br>
<input type="text" name="worker[last_name]" id="last_name" value=<%= @worker.last_name %>>
<br>

<label for="email">Email: </label>
<br>
<input type="email" name="worker[email]" id="email" value=<%= @worker.email %>>
<br>

<label for="license">license: </label>
<br>
<input type="text" name="worker[license]" id="license" value=<%= @worker.license %>>
<br>

<label for="seniority">Seniority: </label>
<br>
<input <%= 'disabled' if @worker.seniority %> type="month" name="worker[seniority]" id="seniority" value= <%= @worker.seniority || Time.now.strftime("%Y-%m") %>>
<br>
<br>
<% if current_user(session).is_admin? %>
  <input type="hidden" name="worker[is_admin?]" value='false' id='is_admin'>
  <label for="rol">Select Roll:</label><br>
  <select name="worker[rol]" id="rol" required>
    <option></option>
    <% Role.all.each do |rol| %>
      <option value="<%= rol %>"><%= rol.upcase %></option>
    <% end %>
  </select><br><br>
  <label for="depot">Select Depot: </label>
  <select name="worker[depot_id]" id="depot" required>
    <option></option>
    <% Depot.all.each do |depot| %>
      <option <%= 'selected' if @worker.depot_id == depot.id %> value="<%= depot.id %>"><%= depot.name %> - <%= depot.location %>  </option> 
    <% end %>

  </select>
  <br>
<% end %>

<input type="submit" value="Submit">
</form>

<script>
  // make license required if it is selected driver as role
document.getElementById("rol").addEventListener('change', function(){
    document.getElementById("license").required = this.value == 'driver';
})
// set is_admin? to true if admin is selected as role
document.getElementById("rol").addEventListener('change', function(){
    document.getElementById("is_admin").value = this.value == 'admin';
})
</script>